var $XLL=function(l){var q=l.document,r={src:"",type:"script",async:true,ajax:true,attributes:{id:"",type:"text/javascript",charset:"",media:"",title:""},success:function(){},error:function(){},timeout:5E3,asyncAjaxDownloads:4},u=function(){this.queue=[];this.blockers=[];this.ajaxQueue=[];this.activeAjaxDownloads=this.lowerBound=0},v=function(){this.index=0;this.errorThrown=null;this.processed=0;this.content="";this.settings=this.node=null},s=null,w=function(){return typeof l.XMLHttpRequest==="function"? function(){return new l.XMLHttpRequest}:typeof l.ActiveXObject==="function"?function(){return new l.ActiveXObject("Microsoft.XMLHTTP")}:null}(),A=function(b){b=b.replace(/^\s+/,"").replace(/\s+$/,"").split(/^(https?:)\/\/([\w\d\.\-_%:@]+)\/?/);var a={protocol:"",host:"",relative:b[0]};if(b.length===4){a.protocol=b[1];a.host=b[2];a.relative=b[3]}return a},x=function b(a,c){var f=function(){},d=function(e,g,m){var h,i,j,k;for(h in m)if(m.hasOwnProperty(h)){i=m[h];j=typeof i;k=e[h];if(typeof k===j)g[h]= j==="object"?d(k,b(k),i):i}return g};f.prototype=a;f=new f;c&&d(a,f,c);return f},B=function(b){var a=q.createElement("iframe"),c;a.style.display="none";b.appendChild(a);if(a.contentDocument)c=a.contentDocument;else if(a.contentglobal)c=a.contentglobal;if(c&&c.document)c=c.document;return{node:a,document:c}},y=function(){return l.addEventListener?function(b){var a=this,c=a.node,f;if(c.node){c=c.node;f=c.document}c.addEventListener("load",function(){var d=a.settings.type==="css";if(d&&f){d=f.styleSheets[0]; d=d.cssRules;if(!d||d.length===0)a.errorThrown=3}else if(d)a.errorThrown=3;b(a)},false);c.addEventListener("error",function(){a.errorThrown=3;b(a)},false);return a}:l.attachEvent?function(b){var a=this;a.node.attachEvent("onreadystatechange",function(){var c=this.readyState;if(c==="loaded"||c==="complete"){this.onreadystatechange=null;if(a.settings.type==="css"){c=this.styleSheet;c=c.rules;if(!c||c.length===0)a.errorThrown=3}b(a)}});return a}:null}();v.prototype={xhrload:function(b){var a,c=this, f=c.settings,d;if(w){a=new w;c.errorThrown=2;d=l.setTimeout(function(){a.abort();b(c)},f.timeout);a.onreadystatechange=function(){var e=a.status;if(a.readyState===4){l.clearTimeout(d);if(e>=200&&e<300||e===304){c.content=a.responseText;c.errorThrown=null}else if(e===0)c.errorThrown=1;b(c)}};a.open("GET",f.src,true);a.send(null)}else{r.ajax=false;c.errorThrown=1;b(c)}return c},createNode:function(){var b=null,a=this.content,c=this.settings,f=c.src,d=c.type;c=c.attributes;var e;if(d==="script"){b=q.createElement("script"); if(a>"")if(b.canHaveChildren!==false)b.appendChild(q.createTextNode(a));else b.text=a;else b.setAttribute("src",f)}else if(d==="css")if(a>""){b=q.createElement("style");if(b.styleSheet)b.styleSheet.cssText=a;else b.appendChild(q.createTextNode(a))}else{b=q.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("href",f)}for(e in c)if(c.hasOwnProperty(e)){a=c[e];a>""&&b.setAttribute(e,a)}this.node=b;return this},addEventListener:y};u.prototype={queuePush:function(b){var a=this,c=a.queue, f=c.length,d=b.settings,e=d.src,g=l.location;g=g.protocol+g.host;if(e>""){b.index=f;if(!d.hasOwnProperty("ajax")){e=A(e);e=e.protocol+e.host;if(e>""&&e!==g)d.ajax=false}}else d.ajax=false;g=d.ajax;c.push(b);d.async||a.blockers.push(f);if(!g||a.activeAjaxDownloads<d.asyncAjaxDownloads){b.processed=1;if(g){a.activeAjaxDownloads+=1;b.xhrload(function m(h){var i=h.settings,j=a.ajaxQueue;if(h.errorThrown===1&&!i.hasOwnProperty("ajax")){h.errorThrown=null;i.ajax=false}a.queuePop(h);if(j.length>0)a.queue[j.shift()].xhrload(m); else a.activeAjaxDownloads-=1})}}else a.ajaxQueue.push(f);return a},queuePop:function(b){var a=this,c=a.blockers,f=a.queue,d=new u,e=d.queue,g=a.lowerBound,m=f.length-1;if(c.length>0)m=c[0];if(b){g=b.index;if(m>g)m=g}for(;g<=m;){b=f[g];if(b.processed===1){b.processed=2;e.push(b)}g+=1}e.length>0&&d.injectToDOM(function(h){var i=h.length,j=false,k,n,p;for(p=0;p<i;p+=1){k=h[p];n=k.settings;if(k.errorThrown)n.error();else{if(!n.async){c.shift();j=true}k.processed=3;if(a.lowerBound+1===k.index)a.lowerBound+= 1;n.success()}}j&&a.queuePop()});return a},injectToDOM:function(b){for(var a=l.document,c=this.queue,f=c.length,d=f,e=a.createDocumentFragment(),g=false,m=[],h=0,i,j,k,n,p=a.getElementsByTagName("head")[0],z=a.getElementsByTagName("body")[0],t=function(o){if(o){l.clearTimeout(m[o.index]);if(j){if(o.errorThrown)o.node=null;else{o.node=j.getElementsByTagName("link")[0];p.appendChild(o.node)}z.removeChild(i)}d-=1}g&&d===0&&b(c)},C=function(o){return function(){o.errorThrown=3;t(o)}};h<f;h+=1){a=c[h]; k=a.settings;if(k.type!=="wait"){n=a.createNode().node;m[a.index]=l.setTimeout(C(a),k.timeout);if(k.ajax){e.appendChild(n);a.node=n;t(a)}else{if(k.type==="css"&&l.addEventListener==="function"){i=B(z);a.node=i;j=i.document;i=i.node;j.open();j.getElementsByTagName("head")[0].appendChild(n);j.close();n=i}else{e.appendChild(n);a.node=n}y&&a.addEventListener(t)}}}p.appendChild(e);g=true;t();return this}};s=new u;return{load:function(b){var a;if(typeof b==="object"){if(!b.attributes)b.attributes={};a= b.attributes;if(b.type&&!a.type)if(b.type==="css")a.type="text/css";else if(b.type==="script")a.type="text/javascript";a=new v;a.settings=x(r,b);s.queuePush(a);s.queue.length===1&&l.setTimeout(function(){s.queuePop()},25)}return this},defaults:function(b){if(typeof b==="object")r=x(r,b);return this},script:function(b,a,c){$XLL.load({src:b,callback:a,error:c,type:"script",attributes:{type:"text/javascript"}});return this},css:function(b,a,c){$XLL.load({src:b,callback:a,error:c,type:"css",attributes:{type:"text/css"}}); return this},wait:function(b){$XLL.load({async:false,callback:b,type:"wait"});return this}}}(this);