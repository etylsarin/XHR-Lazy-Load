var $XLL=function(l){var p=l.document,r={src:"",type:"script",async:true,ajax:true,attributes:{id:"",type:"text/javascript",charset:"",media:"",title:""},success:function(){},error:function(){},timeout:5E3,asyncAjaxDownloads:4},t=function(){this.queue=[];this.blockers=[];this.ajaxQueue=[];this.activeAjaxDownloads=this.lowerBound=0},u=function(){this.index=0;this.errorThrown=null;this.processed=0;this.content="";this.settings=this.node=null},s=null,y=function(b){b=b.replace(/^\s+/,"").replace(/\s+$/, "").split(/^(https?:)\/\/([\w\d\.\-_%:@]+)\/?/);return b.length!==4?{protocol:"",host:"",relative:b[0]}:{protocol:b[1],host:b[2],relative:b[3]}},v=function b(a,c){var e=function(){},d=function(f,g,j){var h,i,k,m;for(h in j)if(j.hasOwnProperty(h)){i=j[h];k=typeof i;m=f[h];if(typeof m===k)g[h]=k==="object"?d(m,b(m),i):i}return g};e.prototype=a;e=new e;c&&d(a,e,c);return e},z=function(b){var a=p.createElement("iframe"),c;a.style.display="none";b.appendChild(a);if(a.contentDocument)c=a.contentDocument; else if(a.contentglobal)c=a.contentglobal;if(c&&c.document)c=c.document;return{iframe:a,document:c}},A=function(){var b=function(){return l.ActiveXObject?new l.ActiveXObject("Microsoft.XMLHTTP"):new l.XMLHttpRequest};return function(a){var c=this,e=c.settings,d,f;if(b){d=new b;c.errorThrown=2;f=l.setTimeout(function(){d.abort();a(c)},e.timeout);d.onreadystatechange=function(){var g=d.status;if(d.readyState===4){l.clearTimeout(f);if(g>=200&&g<300||g===304){c.content=d.responseText;c.errorThrown=null}else if(g=== 0)c.errorThrown=1;a(c)}};d.open("GET",e.src,true);d.send(null)}else{r.ajax=false;c.errorThrown=1;a(c)}return c}}(),w=function(){return l.addEventListener?function(b){var a=this,c=a.node,e;if(c.iframe){e=c.document;c=c.iframe}c.addEventListener("load",function(){var d=a.settings.type==="css";if(d&&e){d=e.styleSheets[0];d=d.cssRules;if(!d||d.length===0)a.errorThrown=3}else if(d)a.errorThrown=3;b(a)},false);c.addEventListener("error",function(){a.errorThrown=3;b(a)},false);return a}:l.attachEvent?function(b){var a= this;a.node.attachEvent("onreadystatechange",function(){var c;if({loaded:1,complete:1}[this.readyState]){this.onreadystatechange=null;if(a.settings.type==="css"){c=this.styleSheet;c=c.rules;if(!c||c.length===0)a.errorThrown=3}b(a)}});return a}:null}();t.prototype={queuePush:function(b){var a=this,c=a.queue,e=c.length,d=b.settings,f=d.src,g=l.location;g=g.protocol+g.host;if(f>""){b.index=e;if(!d.hasOwnProperty("ajax")){f=y(f);f=f.protocol+f.host;if(f>""&&f!==g)d.ajax=false}}else d.ajax=false;g=d.ajax; c.push(b);d.async||a.blockers.push(e);if(!g||a.activeAjaxDownloads<d.asyncAjaxDownloads){b.processed=1;if(g){a.activeAjaxDownloads+=1;b.xhrload(function j(h){var i=h.settings,k=a.ajaxQueue;if(h.errorThrown===1&&!i.hasOwnProperty("ajax")){h.errorThrown=null;i.ajax=false}a.queuePop(h);if(k.length>0)a.queue[k.shift()].xhrload(j);else a.activeAjaxDownloads-=1})}}else a.ajaxQueue.push(e);return a},queuePop:function(b){var a=this,c=a.blockers,e=a.queue,d=new t,f=d.queue,g=a.lowerBound,j=e.length-1;if(c.length> 0)j=c[0];if(b){g=b.index;if(j>g)j=g}for(;g<=j;){b=e[g];if(b.processed===1){b.processed=2;f.push(b)}g+=1}f.length>0&&d.injectToDOM(function(h){var i=h.length,k=false,m,q,o;for(o=0;o<i;o+=1){m=h[o];q=m.settings;if(m.errorThrown)q.error();else{if(!q.async){c.shift();k=true}m.processed=3;if(a.lowerBound+1===m.index)a.lowerBound+=1;q.success()}}k&&a.queuePop()});return a},injectToDOM:function(b){var a=this.queue,c=a.length,e=c,d=p.createDocumentFragment(),f=false,g=[],j,h,i,k;j=p.documentElement.childNodes; var m=j[0],q=j[1],o=function(n){var x;if(n){l.clearTimeout(g[n.index]);if(n.node.iframe){x=n.node.iframe;if(n.errorThrown)n.node=null;else{n.node=n.node.node;m.appendChild(n.node)}q.removeChild(x)}e-=1}f&&!e&&b(a)},B=function(n){return function(){n.errorThrown=3;o(n)}};for(j=0;j<c;j+=1){i=a[j];h=i.settings;if(h.type!=="wait"){k=i.createNode().node;g[i.index]=l.setTimeout(B(i),h.timeout);if(h.ajax){d.appendChild(k);i.node=k;o(i)}else{if(h.type==="css"&&l.addEventListener==="function"){i.node=z(q); h=i.node.document;h.open();h.documentElement.firstChild.appendChild(k);h.close();i.node.node=k;k=i.node.iframe}else{d.appendChild(k);i.node=k}w&&i.addEventListener(o)}}}m.appendChild(d);f=true;o();return this}};s=new t;u.prototype={xhrload:A,createNode:function(){var b=null,a=this.content,c=this.settings,e=c.src,d=c.attributes,f;switch(c.type){case "script":b=p.createElement("script");if(a>"")if(b.canHaveChildren!==false)b.appendChild(p.createTextNode(a));else b.text=a;else b.setAttribute("src",e); if(d.type==="text/css")d.type="text/javascript";break;case "css":if(a>""){b=p.createElement("style");if(b.styleSheet)b.styleSheet.cssText=a;else b.appendChild(p.createTextNode(a))}else{b=p.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("href",e)}if(d.type==="text/javascript")d.type="text/css"}for(f in d)typeof d[f]==="string"&&d[f]>""&&b.setAttribute(f,d[f]);this.node=b;return this},addEventListener:w};return{load:function(b){var a;if(typeof b==="object"){if(!b.attributes)b.attributes= {};a=new u;a.settings=v(r,b);s.queuePush(a);s.queue.length===1&&l.setTimeout(function(){s.queuePop()},25)}return this},defaults:function(b){if(typeof b==="object"){b.src="";r=v(r,b)}return this},script:function(b,a,c){$XLL.load({src:b,callback:a,error:c,type:"script"});return this},css:function(b,a,c){$XLL.load({src:b,callback:a,error:c,type:"css"});return this},wait:function(b){$XLL.load({async:false,callback:b,type:"wait"});return this}}}(this);